@tailwind base;
@tailwind components;
@tailwind utilities;

/* Variables CSS optimizadas */
:root {
  --foreground-rgb: 255, 255, 255;
  --background-start-rgb: 26, 31, 53;
  --background-end-rgb: 45, 54, 76;
}

/* Reset básico */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* Body optimizado */
body {
  color: rgb(var(--foreground-rgb));
  background: linear-gradient(
    to bottom right,
    rgb(var(--background-start-rgb)),
    rgb(var(--background-end-rgb))
  );
  min-height: 100vh;
  font-size: 16px;
}

/* Componentes reutilizables con @layer */
@layer components {
  /* Botón metálico básico - solo el efecto esencial */
  .btn-metallic {
    @apply relative overflow-hidden bg-gradient-to-br from-gray-500 to-gray-700 border border-gray-500 transition-all duration-300;
  }
  
  .btn-metallic::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.6s ease;
    z-index: 1;
  }
  
  .btn-metallic:hover::before {
    left: 100%;
  }
  
  .btn-metallic > * {
    position: relative;
    z-index: 2;
  }

  /* Botón Nueva Revisión optimizado */
  .btn-nueva-revision {
    @apply btn-metallic bg-gradient-to-br from-black via-gray-800 to-black border-gray-700 text-white;
  }
  
  .btn-nueva-revision::before {
    background: linear-gradient(90deg, transparent, rgba(34, 197, 94, 0.6), transparent);
  }

  /* Efecto glass ligero */
  .glass-light {
    @apply bg-gray-800 bg-opacity-70 backdrop-blur-sm border border-gray-600 border-opacity-30;
  }

  /* Scrollbar personalizado */
  .custom-scrollbar::-webkit-scrollbar {
    @apply w-2 h-2;
  }
  
  .custom-scrollbar::-webkit-scrollbar-track {
    @apply bg-gray-800 rounded;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-gray-600 rounded hover:bg-gray-500;
  }
}

/* Optimizaciones para touch devices */
@layer utilities {
  .touch-optimized {
    @apply touch-manipulation;
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    user-select: none;
  }
  
  /* Botones táctiles optimizados */
  .btn-touch {
    @apply min-h-[44px] min-w-[44px] touch-optimized;
  }
  
  /* Respuesta táctil suave */
  @media (hover: none) and (pointer: coarse) {
    .btn-touch:active {
      @apply scale-95 transition-transform duration-100;
    }
  }
}

/* Animaciones críticas únicamente */
@keyframes shimmer-critical {
  0% { transform: translateX(-200%); }
  100% { transform: translateX(200%); }
}

@keyframes pulse-success {
  0%, 100% {
    @apply bg-green-500 shadow-green-500/50;
  }
  50% {
    @apply bg-green-600 shadow-green-500/80;
  }
}

/* Clases de animación optimizadas */
.animate-shimmer-critical {
  animation: shimmer-critical 2s infinite;
}

.animate-pulse-success {
  animation: pulse-success 1.5s ease-in-out infinite;
}

/* Estilos de tabla optimizados para móvil */
@media (max-width: 768px) {
  .table-mobile-optimized {
    @apply overflow-x-auto -mx-4 w-screen;
    max-height: 85vh;
    -webkit-overflow-scrolling: touch;
  }

  .table-mobile-optimized table {
    @apply text-xs border-separate;
    border-spacing: 0;
    min-width: 100%;
  }

  .table-mobile-optimized th,
  .table-mobile-optimized td {
    @apply p-1 text-center whitespace-nowrap min-w-[50px];
    line-height: 1.2;
  }

  .table-mobile-optimized thead {
    @apply sticky top-0 z-30;
  }

  .table-mobile-optimized thead th {
    @apply bg-gray-800 border-b border-gray-600 text-xs font-medium;
  }

  /* Columnas fijas críticas */
  .table-col-fixed-1 {
    @apply sticky left-0 z-20 bg-gray-800 border-r border-gray-600 min-w-[110px] max-w-[110px] text-xs px-1;
  }

  .table-col-fixed-2 {
    @apply sticky z-20 bg-gray-800 border-r border-gray-600 min-w-[60px] text-xs;
    left: 110px;
  }

  /* Headers fijos */
  .table-mobile-optimized thead .table-col-fixed-1,
  .table-mobile-optimized thead .table-col-fixed-2 {
    @apply z-40 bg-gray-800;
  }
}

/* Estilos de tabla para desktop */
@media (min-width: 769px) {
  .table-desktop-optimized {
    @apply overflow-x-auto mb-4 custom-scrollbar;
    max-height: 90vh;
  }

  .table-desktop-optimized thead {
    @apply sticky top-0 z-30;
  }

  .table-desktop-optimized thead th {
    @apply bg-gray-800 border-b border-gray-600;
  }

  .table-desktop-optimized .table-col-fixed-1 {
    @apply sticky left-0 z-20 bg-gray-800 border-r border-gray-600;
  }

  .table-desktop-optimized .table-col-fixed-2 {
    @apply sticky z-20 bg-gray-800 border-r border-gray-600;
    left: 110px;
  }

  .table-desktop-optimized thead .table-col-fixed-1,
  .table-desktop-optimized thead .table-col-fixed-2 {
    @apply z-40 bg-gray-800;
  }
}

/* Tipografía responsiva usando clamp() para mejor rendimiento */
@layer base {
  h1 {
    font-size: clamp(1.5rem, 4vw, 2rem);
    line-height: 1.2;
    letter-spacing: -0.025em;
  }

  h2 {
    font-size: clamp(1.25rem, 3vw, 1.75rem);
    line-height: 1.3;
    letter-spacing: -0.025em;
  }

  h3 {
    font-size: clamp(1.125rem, 2.5vw, 1.5rem);
    line-height: 1.4;
    letter-spacing: -0.025em;
  }

  p, button, input, select, textarea {
    font-size: clamp(0.9rem, 2vw, 1rem);
    line-height: 1.5;
  }
}

/* Prevenir FOUC y mejorar CLS */
.prevent-fouc {
  @apply opacity-0 animate-fade-in;
}

/* Utilidades de rendimiento */
.will-change-transform {
  will-change: transform;
}

.will-change-opacity {
  will-change: opacity;
}

/* Reducir motion para usuarios que lo prefieren */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
} 