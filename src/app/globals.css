@tailwind base;
@tailwind components;
@tailwind utilities;

/* Variables CSS optimizadas */
:root {
  --foreground-rgb: 255, 255, 255;
  --background-start-rgb: 26, 31, 53;
  --background-end-rgb: 45, 54, 76;
}

/* Reset básico */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* Body optimizado */
body {
  color: rgb(var(--foreground-rgb));
  background: linear-gradient(
    to bottom right,
    rgb(var(--background-start-rgb)),
    rgb(var(--background-end-rgb))
  );
  min-height: 100vh;
  font-size: 16px;
}

/* Componentes reutilizables con @layer */
@layer components {
  /* Botón metálico básico - solo el efecto esencial */
  .btn-metallic {
    @apply relative overflow-hidden bg-gradient-to-br from-gray-500 to-gray-700 border border-gray-500 transition-all duration-300;
  }
  
  .btn-metallic::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.6s ease;
    z-index: 1;
  }
  
  .btn-metallic:hover::before {
    left: 100%;
  }
  
  .btn-metallic > * {
    position: relative;
    z-index: 2;
  }

  /* Botón Nueva Revisión optimizado */
  .btn-nueva-revision {
    @apply btn-metallic bg-gradient-to-br from-black via-gray-800 to-black border-gray-700 text-white;
  }
  
  .btn-nueva-revision::before {
    background: linear-gradient(90deg, transparent, rgba(34, 197, 94, 0.6), transparent);
  }

  /* Efecto glass ligero */
  .glass-light {
    @apply bg-gray-800 bg-opacity-70 backdrop-blur-sm border border-gray-600 border-opacity-30;
  }

  /* Scrollbar personalizado */
  .custom-scrollbar::-webkit-scrollbar {
    @apply w-2 h-2;
  }
  
  .custom-scrollbar::-webkit-scrollbar-track {
    @apply bg-gray-800 rounded;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-gray-600 rounded hover:bg-gray-500;
  }
}

/* Optimizaciones para touch devices */
@layer utilities {
  .touch-optimized {
    @apply touch-manipulation;
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    user-select: none;
  }
  
  /* Botones táctiles optimizados */
  .btn-touch {
    @apply min-h-[44px] min-w-[44px] touch-optimized;
  }
  
  /* Respuesta táctil suave */
  @media (hover: none) and (pointer: coarse) {
    .btn-touch:active {
      @apply scale-95 transition-transform duration-100;
    }
  }
}

/* Animaciones críticas únicamente */
@keyframes shimmer-critical {
  0% { transform: translateX(-200%); }
  100% { transform: translateX(200%); }
}

@keyframes pulse-success {
  0%, 100% {
    @apply bg-green-500 shadow-green-500/50;
  }
  50% {
    @apply bg-green-600 shadow-green-500/80;
  }
}

/* Clases de animación optimizadas */
.animate-shimmer-critical {
  animation: shimmer-critical 2s infinite;
}

.animate-pulse-success {
  animation: pulse-success 1.5s ease-in-out infinite;
}

/* Estilos de tabla optimizados - Columnas fijas funcionales */

/* Estilos base para todas las tablas */
.table-container {
  @apply overflow-x-auto custom-scrollbar;
  max-height: 85vh;
  -webkit-overflow-scrolling: touch;
}

.table-container table {
  @apply border-separate;
  border-spacing: 0;
  min-width: 100%;
}

/* Encabezado siempre fijo */
.table-container thead {
  position: sticky !important;
  top: 0 !important;
  z-index: 30 !important;
}

.table-container thead th {
  @apply bg-gray-800 border-b border-gray-600;
  background: linear-gradient(to right, #1e2538cc, #2a3347cc) !important;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

/* Columnas fijas - Primera columna (Fecha) */
.table-col-fixed-1 {
  position: sticky !important;
  left: 0 !important;
  z-index: 20 !important;
  background: linear-gradient(to right, #1e2538, #2a3347) !important;
  border-right: 1px solid rgba(61, 70, 89, 0.5) !important;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  min-width: 110px !important;
  max-width: 110px !important;
}

/* Columnas fijas - Segunda columna (Casita) */
.table-col-fixed-2 {
  position: sticky !important;
  left: 110px !important;
  z-index: 20 !important;
  background: linear-gradient(to right, #1e2538, #2a3347) !important;
  border-right: 1px solid rgba(61, 70, 89, 0.5) !important;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  min-width: 70px !important;
}

/* Headers de columnas fijas con z-index más alto */
.table-container thead .table-col-fixed-1,
.table-container thead .table-col-fixed-2 {
  z-index: 40 !important;
  background: linear-gradient(to right, #1e2538, #2a3347) !important;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

/* Estilos específicos para móvil */
@media (max-width: 768px) {
  .table-container {
    margin: 0 -1rem;
    width: calc(100% + 2rem);
    max-height: 85vh;
  }

  .table-container table {
    @apply text-xs;
    font-size: 0.8rem;
  }

  .table-container th,
  .table-container td {
    @apply p-1 text-center whitespace-nowrap;
    padding: 0.25rem 0.375rem;
    line-height: 1.2;
    min-width: 50px;
  }

  .table-col-fixed-1 {
    font-size: 0.75rem !important;
    padding: 0.25rem 0.375rem !important;
    line-height: 1.1 !important;
  }

  .table-col-fixed-1 .flex-col {
    gap: 0.125rem;
  }

  .table-col-fixed-1 .text-xs {
    font-size: 0.75rem;
    line-height: 1.1;
    color: #c9a45c;
  }

  .table-col-fixed-2 {
    font-size: 0.8rem !important;
    min-width: 60px !important;
  }

  /* Ajustes específicos para columnas en móvil */
  .table-container td:nth-child(3), /* Quien revisa */
  .table-container td:nth-child(4), /* Caja fuerte */
  .table-container td:nth-child(5), /* Puertas/Ventanas */
  .table-container th:nth-child(3),
  .table-container th:nth-child(4),
  .table-container th:nth-child(5) {
    min-width: 70px !important;
  }

  .table-container td:nth-child(22), /* Notas */
  .table-container th:nth-child(22) {
    min-width: 65px !important;
  }

  .table-container td:nth-child(23), /* Evidencias */
  .table-container th:nth-child(23) {
    min-width: 60px !important;
  }
}

/* Estilos específicos para desktop */
@media (min-width: 769px) {
  .table-container {
    max-height: 90vh;
    margin-bottom: 1rem;
  }

  .table-col-fixed-1 {
    min-width: 140px !important;
    max-width: 140px !important;
    color: #c9a45c !important;
    font-size: 1.1rem !important;
  }

  .table-col-fixed-2 {
    left: 140px !important;
    min-width: 70px !important;
  }

  .table-container td {
    @apply p-3;
  }

  /* Ajustes específicos para columnas en desktop */
  .table-container td:nth-child(3), /* Quien revisa */
  .table-container td:nth-child(4), /* Caja fuerte */
  .table-container td:nth-child(5), /* Puertas/Ventanas */
  .table-container th:nth-child(3),
  .table-container th:nth-child(4),
  .table-container th:nth-child(5) {
    min-width: 85px !important;
  }

  .table-container td:nth-child(22), /* Notas */
  .table-container th:nth-child(22) {
    min-width: 75px !important;
  }

  .table-container td:nth-child(23), /* Evidencias */
  .table-container th:nth-child(23) {
    min-width: 120px !important;
  }
}

/* Tipografía responsiva usando clamp() para mejor rendimiento */
@layer base {
  h1 {
    font-size: clamp(1.5rem, 4vw, 2rem);
    line-height: 1.2;
    letter-spacing: -0.025em;
  }

  h2 {
    font-size: clamp(1.25rem, 3vw, 1.75rem);
    line-height: 1.3;
    letter-spacing: -0.025em;
  }

  h3 {
    font-size: clamp(1.125rem, 2.5vw, 1.5rem);
    line-height: 1.4;
    letter-spacing: -0.025em;
  }

  p, button, input, select, textarea {
    font-size: clamp(0.9rem, 2vw, 1rem);
    line-height: 1.5;
  }
}

/* Prevenir FOUC y mejorar CLS */
.prevent-fouc {
  @apply opacity-0 animate-fade-in;
}

/* Utilidades de rendimiento */
.will-change-transform {
  will-change: transform;
}

.will-change-opacity {
  will-change: opacity;
}

/* Reducir motion para usuarios que lo prefieren */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
} 